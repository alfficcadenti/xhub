{
  // application configuration
  "server": {
    "app": {
      "secrets": {
        "$filter": "env.NODE_ENV",
        "development": {
          "oauthClientId": "",
          "oauthClientSecret": ""
        },
        "$default": {
          "oauthClientId": "secret:oauthClientId",
          "oauthClientSecret": "secret:oauthClientSecret"
        }
      },
      // Service-client configuration
      "services": {
        "plugins": ["require:@vrbo/service-client-statsd"],
        "base": {
          "plugins": {
            "statsd": {
              "hostname": {
                "$filter": "env.NODE_ENV",
                "$default": "localhost",
                "production": "statsd"
              },
              "transmit": {
                "$filter": "env.NODE_ENV",
                "$default": false,
                "production": true
              }
            }
          }
        },
        "overrides": {
          "example-service": {
            "protocol": "https:",
            "hostname": "jsonplaceholder.typicode.com",
            "connectTimeout": 10000,
            "timeout": 5000
          }
        }
      },
      "apiServiceConfig": {
        "$filter": "env.EXPEDIA_ENVIRONMENT",
        "$default": {
          "hostname": "opxhub-service.us-west-2.int.expedia.com",
          "protocol": "https:",
          "routes": {
            "resiliencyQuestionnaire": {
              "path": "/api/v1/resiliency/questionnaire",
              "operation": "POST_api_v1_resiliency_questionnaire",
              "method": "POST"
            },
            "apiService": {
              "method": "GET",
              "operation": "GET_api_v1"
            }
          }
        },
        "int": {
          "hostname": "opxhub-service.us-west-2.int.expedia.com",
          "protocol": "https:"
        },
        "test": {
          "hostname": "opxhub-service.us-west-2.test.expedia.com",
          "protocol": "https:"
        },
        "production": {
          "hostname": "opxhub-service.us-west-2.test.expedia.com",
          "protocol": "https:"
        }
      },
      "oauthApi": {
        "$filter": "env.NODE_ENV",
        "$default": {
          "connectionTimeout": 10000,
          "timeout": 10000
        },
        "development": {
          "oauthClientId": "",
          "oauthClientSecret": "",
          "baseUrl": "https://dev-315805.okta.com"
        },
        "production": {
          "oauthClientId": "secret:oauthClientId",
          "oauthClientSecret": "secret:oauthClientSecret",
          "baseUrl": "https://expediagroup.okta.com"
        }
      }
    }
  },

  // register hapi plugins
  "register": {
    "crumb": {
      "enabled": false
    },
    // plugin for serving static content from application
    "inert": {
      "plugin": "require:inert"
    },
    // plugin for reading babel prime property files
    "catalyst-l10n-reader": {
      "plugin": "require:@homeaway/catalyst-l10n-reader",
      "options": {
        "pathTemplate": "./src/i18n/app_{locale}.properties"
      }
    },
    // plugin for providing endpoint for healthchecks, etc.
    "catalyst-status": {
      "plugin": "require:@homeaway/catalyst-status",
      "options": {
        "routes": [
          {
            "path": "/isActive",
            "response": { "status": 200, "payload": "ACTIVE" }
          },
          {
            "path": "/buildInfo",
            "handler": "exec:./status#buildInfo"
          }
        ]
      }
    },
    // plugin for statsd monitoring
    "hapi-statsd": {
      "plugin": "require:@homeaway/catalyst-monitoring-statsd",
      "options": {
        "host": {
          "$filter": "env.EXPEDIA_ENVIRONMENT",
          "$default": "localhost",
          "production": "statsd",
          "test": "statsd"
        },
        "transmit": {
          "$filter": "env.EXPEDIA_ENVIRONMENT",
          "$default": false,
          "production": true,
          "test": true
        },
        "normalizePathParameters": false,
        "prefix": "opxhub-ui"
      }
    },
    // plugin for hbs and react server side rendering
    "catalyst-render": {
      "plugin": "require:@vrbo/catalyst-render",
      "options": {
        "resolveAssetHelper": {
          "name": "resolveAsset",
          "helper": "require:./templates/helpers/resolveAsset.js"
        },
        "routes": [
          {
            "route": "require:./routes/pages/resiliency-questionnaire",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/incident-trends",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/psr",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          }
        ]
      }
    },
    "oauthClient": {
      "plugin": "require:./plugins/OktaAuth"
    }
  }
}
