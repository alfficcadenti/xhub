{
  // application configuration
  "server": {
    "app": {
      "secrets": {
        "$filter": "env.NODE_ENV",
        "development": {
          "oauthClientId": "",
          "oauthClientSecret": ""
        },
        "$default": {
          "oauthClientId": "secret:oauthClientId",
          "oauthClientSecret": "secret:oauthClientSecret"
        }
      },
      // Service-client configuration
      "apiDataServiceConfig": {
        "$filter": "env.EXPEDIA_ENVIRONMENT",
        "$default": {
          "hostname": "opxhub-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "connectionTimeout": 30000,
          "timeout": 30000,
          "routes": {
            "prbs": {
              "path": "/prbs",
              "operation": "GET_prbs",
              "method": "GET"
            }
          }
        },
        "test": {
          "hostname": "opxhub-data-service.us-west-2.test.expedia.com",
          "protocol": "https:",
          "routes": {
            "prbs": {
              "path": "/prbs",
              "operation": "GET_prbs",
              "method": "GET"
            }
          }
        },
        "prod": {
          "hostname": "opxhub-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "routes": {
            "prbs": {
              "path": "/prbs",
              "operation": "GET_prbs",
              "method": "GET"
            }
          }
        }
      },
      "apiServiceConfig": {
        "$filter": "env.EXPEDIA_ENVIRONMENT",
        "$default": {
          "hostname": "opxhub-service.us-east-1.int.expedia.com",
          "protocol": "https:",
          "routes": {
            "resiliencyQuestionnaire": {
              "path": "/api/v1/resiliency/questionnaire",
              "operation": "POST_api_v1_resiliency_questionnaire",
              "method": "POST"
            },
            "apiService": {
              "method": "GET",
              "operation": "GET_api_v1"
            }
          }
        },
        "int": {
          "hostname": "opxhub-service.us-east-1.int.expedia.com",
          "protocol": "https:",
          "routes": {
            "resiliencyQuestionnaire": {
              "path": "/api/v1/resiliency/questionnaire",
              "operation": "POST_api_v1_resiliency_questionnaire",
              "method": "POST"
            },
            "apiService": {
              "method": "GET",
              "operation": "GET_api_v1"
            }
          }
        },
        "test": {
          "hostname": "opxhub-service.us-east-1.test.expedia.com",
          "protocol": "https:",
          "routes": {
            "resiliencyQuestionnaire": {
              "path": "/api/v1/resiliency/questionnaire",
              "operation": "POST_api_v1_resiliency_questionnaire",
              "method": "POST"
            },
            "apiService": {
              "method": "GET",
              "operation": "GET_api_v1"
            }
          }
        },
        "production": {
          "hostname": "opxhub-service.us-east-1.test.expedia.com",
          "protocol": "https:",
          "routes": {
            "resiliencyQuestionnaire": {
              "path": "/api/v1/resiliency/questionnaire",
              "operation": "POST_api_v1_resiliency_questionnaire",
              "method": "POST"
            },
            "apiService": {
              "method": "GET",
              "operation": "GET_api_v1"
            }
          }
        }
      },
      "userEventsApiServiceConfig": {
        "$filter": "env.EXPEDIA_ENVIRONMENT",
        "$default": {
          "hostname": "opxhub-user-events-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "routes": {
            "bookings": {
              "path": "/v1/bookings",
              "method": "GET",
              "operation": "GET_user_events_bookings_api_v1"
            },
            "checkoutSuccessRate": {
              "path": "/v1/checkoutSuccessRate",
              "method": "GET",
              "operation": "GET_user_events_csr_api_v1"
            },
            "pageViews": {
              "path": "/v1/pageViews",
              "method": "GET",
              "operation": "GET_user_events_pageviews_api_v1"
            }
          }
        },
        "int": {
          "hostname": "opxhub-user-events-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "routes": {
            "bookings": {
              "path": "/v1/bookings",
              "method": "GET",
              "operation": "GET_user_events_bookings_api_v1"
            },
            "checkoutSuccessRate": {
              "path": "/v1/checkoutSuccessRate",
              "method": "GET",
              "operation": "GET_user_events_csr_api_v1"
            },
            "pageViews": {
              "path": "/v1/pageViews",
              "method": "GET",
              "operation": "GET_user_events_pageviews_api_v1"
            }
          }
        },
        "test": {
          "hostname": "opxhub-user-events-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "routes": {
            "bookings": {
              "path": "/v1/bookings",
              "method": "GET",
              "operation": "GET_user_events_bookings_api_v1"
            },
            "checkoutSuccessRate": {
              "path": "/v1/checkoutSuccessRate",
              "method": "GET",
              "operation": "GET_user_events_csr_api_v1"
            },
            "pageViews": {
              "path": "/v1/pageViews",
              "method": "GET",
              "operation": "GET_user_events_pageviews_api_v1"
            }
          }
        },
        "prod": {
          "hostname": "opxhub-user-events-data-service.us-east-1.prod.expedia.com",
          "protocol": "https:",
          "routes": {
            "bookings": {
              "path": "/v1/bookings",
              "method": "GET",
              "operation": "GET_user_events_bookings_api_v1"
            },
            "checkoutSuccessRate": {
              "path": "/v1/checkoutSuccessRate",
              "method": "GET",
              "operation": "GET_user_events_csr_api_v1"
            },
            "pageViews": {
              "path": "/v1/pageViews",
              "method": "GET",
              "operation": "GET_user_events_pageviews_api_v1"
            }
          }
        }
      },
      "oauthApi": {
        "$filter": "env.NODE_ENV",
        "$default": {
          "connectionTimeout": 3000,
          "timeout": 30000
        },
        "development": {
          "oauthClientId": "",
          "oauthClientSecret": "",
          "baseUrl": "https://dev-315805.okta.com"
        },
        "production": {
          "oauthClientId": "secret:oauthClientId",
          "oauthClientSecret": "secret:oauthClientSecret",
          "baseUrl": "https://expediagroup.okta.com"
        }
      }
    }
  },

  // register hapi plugins
  "register": {
    "crumb": {
      "enabled": false
    },
    // plugin for serving static content from application
    "inert": {
      "plugin": "require:inert"
    },
    // plugin for reading babel prime property files
    "catalyst-l10n-reader": {
      "plugin": "require:@homeaway/catalyst-l10n-reader",
      "options": {
        "pathTemplate": "./src/i18n/app_{locale}.properties"
      }
    },
    // plugin for providing endpoint for healthchecks, etc.
    "catalyst-status": {
      "plugin": "require:@homeaway/catalyst-status",
      "options": {
        "routes": [{
            "path": "/isActive",
            "response": {
              "status": 200,
              "payload": "ACTIVE"
            }
          },
          {
            "path": "/buildInfo",
            "handler": "exec:./status#buildInfo"
          }
        ]
      }
    },
    // plugin for statsd monitoring
    "hapi-statsd": {
      "plugin": "require:@homeaway/catalyst-monitoring-statsd",
      "options": {
        "host": {
          "$filter": "env.EXPEDIA_ENVIRONMENT",
          "$default": "localhost",
          "prod": "statsd",
          "test": "statsd"
        },
        "transmit": {
          "$filter": "env.EXPEDIA_ENVIRONMENT",
          "$default": true,
          "prod": true,
          "test": true
        },
        "normalizePathParameters": false,
        "prefix": "opxhub-ui"
      }
    },
    // plugin for hbs and react server side rendering
    "catalyst-render": {
      "plugin": "require:@vrbo/catalyst-render",
      "options": {
        "resolveAssetHelper": {
          "name": "resolveAsset",
          "helper": "require:./templates/helpers/resolveAsset.js"
        },
        "routes": [{
            "route": "require:./routes/pages/home",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/landing-page",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/funnel-view",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/resiliency-questionnaire",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/incident-trends",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/defect-trends",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/psr",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/availability",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/prb",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          },
          {
            "route": "require:./routes/pages/health-check-bot-results",
            "component": "require:../universal/components/App/ServerApp.js",
            "template": "templates/welcome.hbs"
          }
        ]
      }
    },
    "oauthClient": {
      "plugin": "require:./plugins/OktaAuth"
    }
  }
}